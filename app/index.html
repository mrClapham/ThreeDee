<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="components/threejs/build/three.min.js"></script>
    <script src="js/vendor/three/controls/OrbitControls.js"></script>
    <style type="text/css">
        #monkeyHolder{
            width:90%;
            height: 90%;
            background-color: #ccffcc;
        }
    </style>
</head>
<body onload="onLoaded()">
<div id="monkeyHolder">Monkey</div>
</body>
</html>
        <script type="text/javascript">
            var _scene, _camera, _renderer, _light, _lightAmbient;

            var _loadTraget = null;


            //Control vars
            var _controls;
            // Camera vars
            var _fov      =  45;               //— Camera frustum vertical field of view.
            var _aspect   =  null;             //— Camera frustum aspect ratio.
            var _near     =  0.1;              //— Camera frustum near plane.
            var _far      =  20000;            //— Camera frustum far plane.

            //Environment
            var _backgroundColour = 0x454545;

            // Model
            var _model = "models/test1.js",
                _lambertColour = 0x00ffff,
                    _lambertArr = [0x00ccff,0x00ffcc,0x066fff,0x00ff33, 0x00ccff,0x00ffcc,0x066fff,0x00ff33,0x00ccff,0x00ffcc,0x066fff,0x00ff33,];

            // Store for the monkeys I created
            var _monkeys = []

            //
            var _clock = new THREE.Clock;



//
            function onLoaded(){
                _init();
            }
//
            function _init(){
                // This is where I'm going to add the monkey
                _loadTraget = document.getElementById('monkeyHolder');

                //Scene
                _scene = new THREE.Scene();
                var WIDTH = window.innerWidth,
                    HEIGHT = window.innerHeight;

                //Renderer
                _renderer = new THREE.WebGLRenderer({antialias:true});
                _renderer.setSize(WIDTH, HEIGHT);
                _aspect = WIDTH / HEIGHT
                _loadTraget.appendChild(_renderer.domElement);

                // Create a camera, zoom it out from the model a bit, and add it to the scene.
                _camera = new THREE.PerspectiveCamera(_fov, _aspect, _near, _far);
                _camera.position.set(0,6,0);
                _scene.add(_camera);

                // Create an event listener that resizes the renderer with the browser window.
                window.addEventListener('resize', function() {
                    var WIDTH = window.innerWidth,
                        HEIGHT = window.innerHeight;
                    _renderer.setSize(WIDTH, HEIGHT);
                    _camera.aspect = WIDTH / HEIGHT;
                    _camera.updateProjectionMatrix();
                });

                // Set the background color of the scene.
                _renderer.setClearColor(_backgroundColour, .1);

                // Create a light, set its position, and add it to the scene.
                _light = new THREE.PointLight(0xffffff);
                _light.position.set(-100,200,100);
                _scene.add(_light);

                // ..and now te ambient light

                _lightAmbient   = new THREE.DirectionalLight(0xff00ff,1);
                _lightAmbient.position.set(100,-700,-300);
                _scene.add(_lightAmbient);

                // Load in the mesh and add it to the scene.
                var loader = new THREE.JSONLoader();
                loader.load( _model, function(geometry){
                    var material = new THREE.MeshLambertMaterial({color: 0xffffff});
                    mesh = new THREE.Mesh(geometry, material);
                    _scene.add(mesh);


                    // ADD A BUNCH OF MONKEYS...

                        for ( var i = 0; i < 5; i ++ ) {
                        var __material = new THREE.MeshLambertMaterial({color: _lambertArr[i]});

                        var __mesh = new THREE.Mesh( geometry, __material );
//                            __mesh.position.x = ( Math.random() - 0.5 ) * 10;
//                            __mesh.position.y = ( Math.random() - 0.5 ) * 10;
//                            __mesh.position.z = ( Math.random() - 0.5 ) * 10;

                            __mesh.position.x = i * 2;
                            __mesh.position.y = i * 2;
                            __mesh.position.z = i * 2;
                            __mesh.rotation.z = i * 10;
                            __mesh.updateMatrix();
                            __mesh.matrixAutoUpdate = true;
                        _scene.add( __mesh );
                            _monkeys.push(__mesh)
                    }




                    // Add OrbitControls so that we can pan around with the mouse.
                    _controls = new THREE.OrbitControls(_camera, _renderer.domElement);

                    requestAnimationFrame(animate);
                });
                ///

                // Renders the scene and updates the render as needed.
                function animate() {
                    //_monkeys[1].position.x += .002;
                    _monkeys[2].rotation.z -= _clock.getDelta();

                    _monkeys[1].rotation.z -= .03;

                    _monkeys[3].rotation.x -= .03;
                    _monkeys[3].rotation.z -= .03;;

                    for(var mnk in _monkeys){
                        _monkeys[mnk].updateMatrix()
                    }

                    // Render the scene.
                    _renderer.render(_scene, _camera);
                    _controls.update();
                    // Read more about requestAnimationFrame at http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/
                    requestAnimationFrame(animate);
                }
            }

        </script>